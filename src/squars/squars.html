<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>

<title>Squars</title>
<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
<meta name="description" content="LI7E!">

  <head>

    <!-- socket.io -->
    <!-- <script type="text/javascript" src="lib/socket.io.js"></script> -->

    <!-- jquery UI -->
    <link type="text/css" href="../../vendor/jquery-ui-themes/ui-darkness/jquery-ui-1.8.9.custom.css" rel="stylesheet" />     
    <script type="text/javascript" src="../../vendor/jquery-1.6.1.min.js"></script>
    <script type="text/javascript" src="../../vendor/jquery-ui-1.8.13.custom.min.js"></script>

    <!-- audiolet -->
    <script type="text/javascript" src="../../vendor/Audiolet/src/mootools/mootools-core-1.3-full-nocompat.js"></script>
    <!-- <script type="text/javascript" src="../lib/audiolet/Audiolet.js"></script> -->
    <script type="text/javascript" src="../../vendor/Audiolet/src/audiolet/Audiolet.min.js"></script>

    <!-- squars -->
    <script type="text/javascript" src="squars.js"></script>
    <link type="text/css" rel="stylesheet" href="squars.css"></link> 

  </head>

<body style="cursor: auto;">


<div class = "drag">

<div id="box" >

<div style="float:left;">

	<input onclick="play();" value="Play" type="button">&nbsp;<br> <br>
	<input onclick="stop();" value="Stop" type="button">&nbsp;<br> <br>
	<input onclick="clearClicks();" value="Clear All" type="button">&nbsp;<br> <br>

			
	<input onclick="toggleRounded(this.checked);" checked="checked" type="checkbox">Rounded&nbsp;<br>
	<input onclick="toggleSmoke(this.checked);" checked="checked" type="checkbox">Smokes&nbsp;<br>
	<input onclick="toggleColor(this.checked);" checked="checked" type="checkbox">Colours&nbsp;<br>
	<input onclick="toggleRandom(this.checked);" checked="checked" type="checkbox">Random Colours&nbsp;<br>

	
	<br><br><br><br>
</div>

<canvas style="float:right;" id="squars" width="450" height="450"></canvas>

	<div id="jdebug">Debug</div>

</div> 

<script type="text/javascript"> 

// Audiolet


    var majorScale = [ 261.63, 293.66, 329.63, 349.23, 392, 440, 493.88, 523.25];

    var audiolet = new Audiolet();

    audiolet.scheduler.setTempo(120);

    // creating an instrument

    // borrowed from @o_amp_o's code
    var HighSynth = new Class({
        Extends: AudioletGroup,
        initialize: function(audiolet) {
            AudioletGroup.prototype.initialize.apply(this, [audiolet, 0, 1]);
           
            // Triangle base oscillator
            this.triangle = new Triangle(audiolet);

            // Note on trigger
            this.trigger = new TriggerControl(audiolet);

            // Gain envelope
            this.gainEnv = new PercussiveEnvelope(audiolet, 0, 0.2, 0.2);
            this.gainEnvMulAdd = new MulAdd(audiolet, 0.3);
            this.gain = new Gain(audiolet);

            // Connect oscillator
            this.triangle.connect(this.gain);
            
            // Connect trigger and envelope
            this.trigger.connect(this.gainEnv);
            this.gainEnv.connect(this.gainEnvMulAdd);
            this.gainEnvMulAdd.connect(this.gain, 0, 1);
            this.gain.connect(this.outputs[0]);
        }
    });

    var synths = [];
    var patterns = [];

    var duration = new PProxy(new PSequence([1], Infinity));

    for (i=0; i<8; i++) {
        synths[i] = new HighSynth(audiolet)
        synths[i].connect(audiolet.output);
        patterns[i] = new PProxy(new PSequence([0, 0, 0, 0, 0, 0, 0, 0], Infinity));
        audiolet.scheduler.play([patterns[i]], duration,
                                function (frequency) {
                                    this.trigger.trigger.setValue(1);
                                    this.triangle.frequency.setValue(frequency);
                                }.bind(synths[i]));
    }
	

</script> 	
	
<script type="text/javascript"> 
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="squars/ga.js" type="text/javascript"></script> 
<script type="text/javascript"> 
try {
var pageTracker = _gat._getTracker("UA-7549263-1");
pageTracker._trackPageview();
} catch(err) {}
</script> 

</body></html>
